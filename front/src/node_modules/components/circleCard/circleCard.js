import React from 'react';
import PieChart, {
  Legend,
  Export,
  Series,
  Label,
  Font,
  Connector,
} from 'devextreme-react/pie-chart';
import RestService from '../../services/tradeUnionService'
import { useEffect, useState } from 'react';
const rest = new RestService();
// import { dataSource } from './data.js';

const CircleCard = (props) =>{
    const [data, setData] = useState(null)

    function refreshCard(){
        rest.all(props.path)
        .then(item => setData(item))
    }

    useEffect(()=>{
        refreshCard()
    },[])

    return (
      <PieChart id="pie"
        palette="Bright"
        dataSource={data}
        title={props.title}
      >
        <Legend
          orientation="horizontal"
          itemTextPosition="right"
          horizontalAlignment="center"
          verticalAlignment="bottom"
          columnCount={4} />
        <Export enabled={true} />
        <Series argumentField={props.argumentField} valueField={props.valueField}>
          <Label
            visible={true}
            position="columns"
            customizeText={customizeText}>
            <Font size={16} />
            <Connector visible={true} width={0.5} />
          </Label>
        </Series>
      </PieChart>
    );
}
function customizeText(arg) {
  return `${arg.valueText} (${arg.percentText})`;
}

export default CircleCard;
